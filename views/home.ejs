<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- TSMA - Travel Social Media Application -->
    <title>TSMA - Home and Posts</title>

    <!-- Bootstrap 5 CDN Links -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!-- Fontawesome - for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/fontawesome.min.css" integrity="sha512-kJ30H6g4NGhWopgdseRb8wTsyllFUYIx3hiUwmGAkgA9B/JbzUBDQVr2VVlWGde6sdBVOG7oU8AL35ORDuMm8g==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">

    <!-- My own CSS Stylesheet -->
    <link rel="stylesheet" href="css/style.css">
</head>

<body class="body">
<!-- Navbar -->
<nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">Travel Network</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="fa fa-bars"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <!-- Navbar Options -->
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item mx-1">
                    <a class="nav-link active" aria-current="page" href="/">Home</a>
                </li>
                <li class="nav-item  mx-1">
                    <a class="nav-link" href="#">Messages</a>
                </li>
                <li class="nav-item  mx-1">
                    <a class="nav-link" href="/findfriends">Find Friends &nbsp;<i class="bi bi-people-fill"></i></a>
                </li>
                <li class="nav-item  mx-1">
                    <a class="nav-link" href="/weather">Weather</a>
                </li>
				<li class="nav-item  mx-1">
                    <a class="nav-link" href="/travelplanner">Travel Planner</a>
                </li>
            </ul>

            <form class="d-flex">
                <div class="account">
                <ul>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fa fa-user" aria-hidden="true"></i>&nbsp;My Account
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="/deleteaccount">Delete Account</a></li>
                    </ul>
                </li>
                </ul>

                <ul>
                    <li class="nav-item">
                        <a class="nav-link" href="logout">Log Out</a>
                    </li>
                </ul>
                </div>

                <!-- Search Bar -->
                <div>
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                </div>
            </form>
        </div>
    </div>
</nav>

<!-- Main body -->
<main class="mt-5 mb-5">
<% currentuser.forEach(function(users){ %>
   <div class="container">
       <div class="row">
           <div class="col-lg-3 col-md-3 col-sm-12 div-1">

                <!-- Left Side -->
               <div class="left-side-bar">
                   <!-- My Profile Part-->
                   <h4>My Profile</h4>
                   <ul>
                       <li><img src="images/user.png" alt="user" class="img-fluid">&nbsp;<span class="username"><%= users.username %></span></li>
                       <li>&nbsp;<i class="fa fa-birthday-cake" aria-hidden="true"></i>&nbsp;<%= users.birthday %></li>
                       <li><img src="images/location.png" class="img-fluid" alt="location">&nbsp;Live in <%= users.location %></li>
                       <!--<li><img src="images/folllow.png" class="img-fluid" alt="follow">&nbsp;Followed by 99 People</li>-->
                       <!--<li><img src="images/internet.png" class="img-fluid" alt="website">&nbsp;www.website.com</li>-->
                   </ul>

                   <hr>

                   <!-- Countries visited-->
                   <h4>Countries Visited</h4>
                   <ul class="country-visited mt-3">
                     
                    <%
                    var countryvisitedArray = users.countryvisited;
                    countryvisitedArray = countryvisitedArray.filter(Boolean);
                     for(let i=0; i<countryvisitedArray.length; i++) { %>
                        <li>
                            <button class="btn rounded-pill round-btn"><%= users.countryvisited[i] %></button>
                            
                        </li>
                    <% } %>
                   </ul>

                   <hr>
                   
                   <!-- Countries visited-->
                   <h4>Dream country to visit</h4>
                   <ul class="country-visited mt-3">
                       <li><button class="btn rounded-pill round-btn"><%= users.dreamcountry %></button></li>

                       <!-- <li><button class="btn rounded-pill round-btn">Mexico</button></li>
                       <li><button class="btn rounded-pill round-btn">Thailand</button></li> -->
                   </ul>

               </div>
           </div>

           <div class="col-lg-6 col-md-6 col-sm-12 div-2">
               <div class="middle-bar">
                <!-- Post form -->
                <form method="POST" action="/postadded">  

                <div class="post-div">
                <ul>
                    <li><img src="images/user.png" alt="user" class="img-fluid"></li>
                    <!-- <li><textarea  class="form-control post" rows="3" placeholder="What is on your mind..."></textarea></li> -->
                    <li><input type="text" class="form-control post" name="message" placeholder="What is on your mind... " required>
                </ul>
                <div class="text-center">
                <button class="btn btn-primary">Post</button>
                </div>
                </div>

                </form>

                <% availableposts.forEach(function(posts){ %>
                    
                <!-- Post Boxes -->
                <div class="post-box">
                    <img src="images/user.png" alt="user" class="img-fluid">&nbsp;
                    <a><%= posts.username %></a>
                    <br>
                    <small><%= posts.timeDate %></small>
                    <p><%= posts.message %></p>
                    <hr>

                    <ul>
                        <li><a href="">Like</a></li>
                        <li><a href="">Comment</a></li>
                        <li><a href="">Share</a></li>
                    </ul>
                </div>

                    <% }) %>
               
               </div>
           </div>

           <div class="col-lg-3 col-md-3 col-sm-12 div-3">
               <!-- Right Side -->
               <div class="right-side">
                <!-- My friends Part -->
                <h4>My Friends</h4>
                <ul>
                    
                    <%
                    var friendsArray = users.friends;
                     for(let i=0; i<friendsArray.length; i++) { %>
                        <li>
                    <img src="images/user.png" alt="" class="img-fluid">&nbsp;<span><a href=""><%= users.friends[i] %></a></span>
                            
                        </li>
                    <% } %>
                </ul>

                <hr>

                <h4>Upcoming Holiday</h4>
                <ul>
                    <li><br><i class="bi bi-pin-map-fill"></i>&nbsp <%= users.destination %></span></li>
                    <li>&nbsp&nbsp  - Departure: <%= users.departure %></span></li>
                    <li>&nbsp&nbsp  - Arrival: <%= users.arrival %></span></li>
                </ul>
               </div>
           </div>
       </div>
   </div>
   <% }) %>
</main>

<!-- Footer -->
<footer class="footer">
    <p class="pt-3">&copy; Travel Social Media</p>
</footer>

</body>
</html>